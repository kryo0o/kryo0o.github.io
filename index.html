<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>豆包风格 GitHub Pages</title>
    <!-- Tailwind CSS 快速样式 -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Prism.js 代码高亮 -->
    <link href="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0/prism.min.js"></script>
    <!-- Font Awesome 图标 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- 自定义配置 -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#4096ff',
                        secondary: '#e5e7eb',
                        dark: '#1f2937',
                        light: '#f9fafb'
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .code-block {
                @apply rounded-lg bg-dark p-4 text-white overflow-x-auto;
            }
            .tag-item {
                @apply px-3 py-1 rounded-full text-sm cursor-pointer transition-all hover:bg-primary/10;
            }
            .tag-active {
                @apply bg-primary text-white hover:bg-primary/90;
            }
            .page-item {
                @apply w-9 h-9 flex items-center justify-center rounded-md border border-secondary cursor-pointer transition-all hover:border-primary hover:text-primary;
            }
            .page-active {
                @apply bg-primary text-white border-primary hover:bg-primary/90;
            }
        }
    </style>
</head>
<body class="bg-light min-h-screen">
    <!-- 顶部导航 -->
    <header class="sticky top-0 z-10 bg-white shadow-sm">
        <div class="container mx-auto px-4 py-4 flex justify-between items-center">
            <h1 class="text-2xl font-bold text-primary">豆包风格博客</h1>
            <div class="flex items-center gap-2">
                <span class="text-gray-600">筛选：</span>
                <div id="tag-container" class="flex flex-wrap gap-2"></div>
            </div>
        </div>
    </header>

    <!-- 主内容区 -->
    <main class="container mx-auto px-4 py-8">
        <!-- 文章列表 -->
        <div id="article-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8"></div>

        <!-- 分页控件 -->
        <div class="flex justify-center items-center gap-2 mt-8">
            <div id="prev-page" class="page-item">
                <i class="fa-solid fa-chevron-left"></i>
            </div>
            <div id="page-number-container" class="flex gap-1"></div>
            <div id="next-page" class="page-item">
                <i class="fa-solid fa-chevron-right"></i>
            </div>
        </div>
    </main>

    <!-- 底部 -->
    <footer class="bg-dark text-white py-6 mt-12">
        <div class="container mx-auto px-4 text-center">
            <p>© 2025 豆包风格 GitHub Pages | 基于 Tailwind CSS & Prism.js 构建</p>
        </div>
    </footer>

    <script>
        // 1. 模拟文章数据（实际可替换为 JSON 文件或 API 数据）
        const articleData = [
            {
                id: 1,
                title: "JavaScript 异步编程详解",
                excerpt: "深入讲解 Promise、async/await 等异步编程方式",
                tags: ["JavaScript", "异步编程", "前端"],
                date: "2025-01-10",
                code: `// Promise 示例
const fetchData = () => {
  return new Promise((resolve, reject) => {
    setTimeout(() => {
      resolve({ data: "异步数据" });
    }, 1000);
  });
};

// async/await 调用
const getData = async () => {
  try {
    const result = await fetchData();
    console.log(result);
  } catch (error) {
    console.error(error);
  }
};

getData();`
            },
            {
                id: 2,
                title: "Tailwind CSS 快速上手",
                excerpt: "零基础学习 Tailwind CSS 实用技巧",
                tags: ["CSS", "Tailwind", "前端"],
                date: "2025-01-15",
                code: `<!-- Tailwind CSS 按钮示例 -->
<button class="px-4 py-2 bg-primary text-white rounded-md hover:bg-primary/90 transition">
  提交按钮
</button>

<!-- 响应式布局 -->
<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
  <div class="p-4 border rounded-lg">卡片 1</div>
  <div class="p-4 border rounded-lg">卡片 2</div>
  <div class="p-4 border rounded-lg">卡片 3</div>
</div>`
            },
            {
                id: 3,
                title: "Python 爬虫基础教程",
                excerpt: "使用 requests 和 BeautifulSoup 爬取网页数据",
                tags: ["Python", "爬虫", "后端"],
                date: "2025-01-20",
                code: `# Python 爬虫示例
import requests
from bs4 import BeautifulSoup

url = "https://example.com"
response = requests.get(url)
soup = BeautifulSoup(response.text, "html.parser")

# 获取页面标题
title = soup.find("title").text
print(f"页面标题：{title}")

# 获取所有链接
links = soup.find_all("a")
for link in links:
    print(link.get("href"))`
            },
            {
                id: 4,
                title: "Git 常用命令总结",
                excerpt: "日常开发中高频使用的 Git 命令整理",
                tags: ["Git", "版本控制", "工具"],
                date: "2025-01-25",
                code: `# 初始化仓库
git init

# 克隆仓库
git clone https://github.com/username/repo.git

# 查看状态
git status

# 添加文件到暂存区
git add .

# 提交修改
git commit -m "feat: 新增功能"

# 推送到远程
git push origin main

# 拉取最新代码
git pull origin main

# 查看提交记录
git log --oneline`
            },
            {
                id: 5,
                title: "React Hooks 实战指南",
                excerpt: "掌握 useState、useEffect 等常用 Hooks",
                tags: ["React", "前端", "Hooks"],
                date: "2025-02-01",
                code: `// React Hooks 示例
import { useState, useEffect } from 'react';

function Counter() {
  // 状态管理
  const [count, setCount] = useState(0);
  
  // 副作用
  useEffect(() => {
    document.title = \`计数：\${count}\`;
    
    // 清理函数
    return () => {
      document.title = "React App";
    };
  }, [count]);

  return (
    <div className="p-4">
      <p>计数：{count}</p>
      <button onClick={() => setCount(count + 1)} className="px-3 py-1 bg-primary text-white rounded">
        增加
      </button>
    </div>
  );
}

export default Counter;`
            },
            {
                id: 6,
                title: "MySQL 常用查询语句",
                excerpt: "增删改查及复杂查询的实现方式",
                tags: ["MySQL", "数据库", "后端"],
                date: "2025-02-05",
                code: `-- 创建表
CREATE TABLE users (
  id INT PRIMARY KEY AUTO_INCREMENT,
  name VARCHAR(50) NOT NULL,
  age INT,
  create_time DATETIME DEFAULT CURRENT_TIMESTAMP
);

-- 插入数据
INSERT INTO users (name, age) VALUES ('张三', 25), ('李四', 30);

-- 查询数据
SELECT * FROM users WHERE age > 25 ORDER BY create_time DESC;

-- 更新数据
UPDATE users SET age = 26 WHERE name = '张三';

-- 删除数据
DELETE FROM users WHERE id = 2;

-- 联表查询
SELECT u.name, o.order_no 
FROM users u
LEFT JOIN orders o ON u.id = o.user_id;`
            },
            {
                id: 7,
                title: "Vue3 组合式 API 详解",
                excerpt: "setup 语法糖、ref、reactive 等核心特性",
                tags: ["Vue3", "前端", "组合式API"],
                date: "2025-02-10",
                code: `<!-- Vue3 组合式 API 示例 -->
<template>
  <div class="p-4">
    <h3>{{ title }}</h3>
    <p>计数：{{ count }}</p>
    <button @click="increment" class="px-3 py-1 bg-primary text-white rounded">
      增加
    </button>
  </div>
</template>

<script setup>
import { ref, reactive, onMounted } from 'vue';

// 基本类型响应式
const count = ref(0);
// 复杂类型响应式
const state = reactive({
  title: "Vue3 示例"
});

// 方法
const increment = () => {
  count.value++;
};

// 生命周期
onMounted(() => {
  console.log("组件挂载完成");
});
</script>`
            },
            {
                id: 8,
                title: "Docker 容器化部署教程",
                excerpt: "快速搭建 Docker 环境并部署应用",
                tags: ["Docker", "运维", "工具"],
                date: "2025-02-15",
                code: `# Dockerfile 示例
FROM node:18-alpine
WORKDIR /app
COPY package*.json ./
RUN npm install
COPY . .
EXPOSE 3000
CMD ["npm", "start"]

# 构建镜像
docker build -t my-app:1.0 .

# 运行容器
docker run -d -p 3000:3000 --name my-app-container my-app:1.0

# 查看运行中的容器
docker ps

# 进入容器
docker exec -it my-app-container /bin/sh

# 停止容器
docker stop my-app-container`
            }
        ];

        // 2. 全局状态管理
        const state = {
            currentTag: "全部", // 当前选中的标签
            currentPage: 1,     // 当前页码
            pageSize: 3,        // 每页显示文章数
            totalPages: 0,      // 总页数
            filteredArticles: [] // 筛选后的文章列表
        };

        // 3. 初始化标签列表
        function initTags() {
            // 提取所有标签并去重
            const allTags = ["全部", ...new Set(articleData.flatMap(article => article.tags))];
            const tagContainer = document.getElementById("tag-container");
            
            allTags.forEach(tag => {
                const tagItem = document.createElement("div");
                tagItem.className = `tag-item ${tag === state.currentTag ? 'tag-active' : ''}`;
                tagItem.textContent = tag;
                tagItem.dataset.tag = tag;
                
                // 标签点击事件
                tagItem.addEventListener("click", () => {
                    state.currentTag = tag;
                    state.currentPage = 1; // 切换标签后重置页码
                    updateTagActiveStatus();
                    filterArticles();
                    renderArticles();
                    renderPagination();
                });
                
                tagContainer.appendChild(tagItem);
            });
        }

        // 4. 更新标签选中状态
        function updateTagActiveStatus() {
            const tagItems = document.querySelectorAll(".tag-item");
            tagItems.forEach(item => {
                if (item.dataset.tag === state.currentTag) {
                    item.classList.add("tag-active");
                } else {
                    item.classList.remove("tag-active");
                }
            });
        }

        // 5. 筛选文章
        function filterArticles() {
            if (state.currentTag === "全部") {
                state.filteredArticles = [...articleData];
            } else {
                state.filteredArticles = articleData.filter(article => 
                    article.tags.includes(state.currentTag)
                );
            }
            // 计算总页数
            state.totalPages = Math.ceil(state.filteredArticles.length / state.pageSize);
        }

        // 6. 渲染文章列表
        function renderArticles() {
            const articleList = document.getElementById("article-list");
            articleList.innerHTML = "";
            
            // 计算当前页显示的文章范围
            const startIndex = (state.currentPage - 1) * state.pageSize;
            const endIndex = startIndex + state.pageSize;
            const currentArticles = state.filteredArticles.slice(startIndex, endIndex);
            
            if (currentArticles.length === 0) {
                articleList.innerHTML = `<div class="col-span-full text-center py-12 text-gray-500">暂无相关文章</div>`;
                return;
            }
            
            currentArticles.forEach(article => {
                const articleCard = document.createElement("div");
                articleCard.className = "bg-white rounded-lg shadow-sm overflow-hidden hover:shadow-md transition-shadow";
                
                // 构建文章卡片内容
                articleCard.innerHTML = `
                    <div class="p-6">
                        <div class="flex justify-between items-start mb-3">
                            <h2 class="text-xl font-semibold text-dark hover:text-primary transition-colors">${article.title}</h2>
                            <span class="text-xs text-gray-400">${article.date}</span>
                        </div>
                        <p class="text-gray-600 mb-4">${article.excerpt}</p>
                        <div class="flex flex-wrap gap-2 mb-4">
                            ${article.tags.map(tag => `<span class="tag-item bg-gray-100">${tag}</span>`).join('')}
                        </div>
                        <div class="code-block">
                            <pre><code class="language-${getCodeLanguage(article.code)}">${escapeHtml(article.code)}</code></pre>
                        </div>
                    </div>
                `;
                
                articleList.appendChild(articleCard);
            });
            
            // 高亮代码
            Prism.highlightAll();
        }

        // 7. 渲染分页控件
        function renderPagination() {
            const pageNumberContainer = document.getElementById("page-number-container");
            const prevPage = document.getElementById("prev-page");
            const nextPage = document.getElementById("next-page");
            
            // 清空页码容器
            pageNumberContainer.innerHTML = "";
            
            // 生成页码（最多显示5个页码）
            const maxVisiblePages = 5;
            let startPage = Math.max(1, state.currentPage - 2);
            let endPage = Math.min(state.totalPages, startPage + maxVisiblePages - 1);
            
            // 调整起始页码
            if (endPage - startPage + 1 < maxVisiblePages) {
                startPage = Math.max(1, endPage - maxVisiblePages + 1);
            }
            
            // 生成页码按钮
            for (let i = startPage; i <= endPage; i++) {
                const pageItem = document.createElement("div");
                pageItem.className = `page-item ${i === state.currentPage ? 'page-active' : ''}`;
                pageItem.textContent = i;
                pageItem.dataset.page = i;
                
                // 页码点击事件
                pageItem.addEventListener("click", () => {
                    state.currentPage = parseInt(pageItem.dataset.page);
                    renderArticles();
                    renderPagination();
                });
                
                pageNumberContainer.appendChild(pageItem);
            }
            
            // 禁用/启用上一页/下一页
            prevPage.style.opacity = state.currentPage === 1 ? "0.5" : "1";
            prevPage.style.pointerEvents = state.currentPage === 1 ? "none" : "auto";
            
            nextPage.style.opacity = state.currentPage === state.totalPages ? "0.5" : "1";
            nextPage.style.pointerEvents = state.currentPage === state.totalPages ? "none" : "auto";
            
            // 上一页点击事件
            prevPage.addEventListener("click", () => {
                if (state.currentPage > 1) {
                    state.currentPage--;
                    renderArticles();
                    renderPagination();
                }
            });
            
            // 下一页点击事件
            nextPage.addEventListener("click", () => {
                if (state.currentPage < state.totalPages) {
                    state.currentPage++;
                    renderArticles();
                    renderPagination();
                }
            });
        }

        // 8. 辅助函数：获取代码语言
        function getCodeLanguage(code) {
            if (code.includes("//") && !code.includes("#") && !code.includes("--")) return "javascript";
            if (code.includes("#") && !code.includes("//") && !code.includes("--")) return "python";
            if (code.includes("/*") || code.includes("Tailwind")) return "html";
            if (code.includes("--")) return "sql";
            if (code.includes("docker")) return "bash";
            return "javascript";
        }

        // 9. 辅助函数：转义HTML字符
        function escapeHtml(unsafe) {
            return unsafe
                .replace(/&/g, "&amp;")
                .replace(/</g, "&lt;")
                .replace(/>/g, "&gt;")
                .replace(/"/g, "&quot;")
                .replace(/'/g, "&#039;");
        }

        // 10. 初始化页面
        function init() {
            initTags();
            filterArticles();
            renderArticles();
            renderPagination();
        }

        // 页面加载完成后初始化
        document.addEventListener("DOMContentLoaded", init);
    </script>
</body>
</html>